(function(){"use strict";var t={6711:function(t,e,i){var n=i(6369),s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app"},[e("div",{staticClass:"drag-select-wrapper"},[e("DragSelect")],1)])},o=[],r=function(){var t=this,e=t._self._c;return e("div",{class:["index-page",t.mood?"":"bigger"]},[e("div",{staticClass:"result-box"},[e("vue-drag-select",{ref:"dragSelect",attrs:{selectedDOMList:t.selectedDOMList,"value-key":"name","item-margin":[0,10,10,0]},on:{"update:selectedDOMList":function(e){t.selectedDOMList=e},"update:selected-d-o-m-list":function(e){t.selectedDOMList=e}},model:{value:t.selectedList,callback:function(e){t.selectedList=e},expression:"selectedList"}},t._l(t.dataList,(function(i,n){return e("drag-select-option",{key:i.id,attrs:{value:i,"item-index":n}},[e("div",{staticClass:"item-self"},[t._v(" "+t._s(i.name)+" ")])])})),1)],1),e("div",{staticClass:"chart-box"},[t._v("chart")])])},l=[],a=(i(7658),function(){var t=this,e=t._self._c;return e("div",{ref:"vueDragSelect",staticClass:"vue-drag-select"},[e("div",{staticClass:"select-wrapper",style:t.wrapperStyle,on:{mousedown:t.onMouseDown}},[t._t("default"),e("div",{directives:[{name:"show",rawName:"v-show",value:t.mouseDown,expression:"mouseDown"}],staticClass:"vue-drag-select-box",style:t.selectionBoxStyling})],2)])}),c=[];const u=function(t,e){e=e||"";const i=e.split(".");let n=t,s=null;for(let o=0,r=i.length;o<r;o++){const t=i[o];if(!n)break;if(o===r-1){s=n[t];break}n=n[t]}return s},d=function(){for(var t=0,e=["webkit","moz"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),n=Math.max(0,16.7-(i-t)),s=window.setTimeout((function(){e(i+n)}),n);return t=i+n,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})},h=function(t){let e;function i(){const e=document.createElement("ul");e.classList.add("custom-context-menu"),e.classList.add("hidden");const{menus:i}=t;if(i&&i.length>0)for(let t of i){const i=document.createElement("li");i.textContent=t.name,i.onclick=t.onClick,e.appendChild(i)}const n=document.querySelector("body");return n.appendChild(e),e}return{getInstance:function(){return e||(e=i()),e}}};var p={name:"vueDragSelect",props:{value:{type:Array,default:function(){return[]}},valueKey:{type:String,default:"value"},itemWidth:{type:Number,default:50},itemHeight:{type:Number,default:50},itemMargin:{type:Array,default(){return[20,20,20,20]},validator(t){return[1,2,3,4].includes(t.length)}},warpperPadding:{type:Array,default(){return[20,20,20,20]},validator(t){return[1,2,3,4].includes(t.length)}},slowSpeed:{type:Number,default:0},fastSpeed:{type:Number,default:20},selectedDOMList:{type:Array,default(){return[]}}},provide(){return{vueDragSelect:this}},data(){return{clientRect:null,options:[],minHeight:100,mouseDown:!1,startPoint:null,endPoint:null,lastEndPoint:null,scrollIng:!1,autoScrollTimer:null,scrollDirection:!0,selectionBox:{left:0,top:0,width:0,height:0},selectionBoxStyling:{left:"0px",top:"0px",width:"0px",height:"0px",borderWidth:"0px"},shiftKeyDown:!1,scrollSpeedSlow:Math.min(this.slowSpeed,this.fastSpeed),scrollSpeedFast:Math.max(this.slowSpeed,this.fastSpeed),scrollSpeed:Math.min(this.slowSpeed,this.fastSpeed),triggerDistance:10}},mounted(){d(),this.clientRect=this.$el.getBoundingClientRect(),this.elementLayout(),this.detectKey()},computed:{currentValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},wrapperStyle(){const t=this.warpperPadding.map((t=>t+"px")).join(" ");return{minHeight:`${this.minHeight}px`,padding:t}}},methods:{boxAutoScroll(){this.scrollIng=!0,this.autoScrollTimer=window.requestAnimationFrame(this.scrollFn)},scrollFn(){if(this.mouseDown){if(this.scrollDirection){if(this.$el.scrollTop+this.$el.offsetHeight>=this.minHeight)return void(this.scrollIng=!1);this.$el.scrollTop+=this.scrollSpeed}else{if(this.$el.scrollTop<=0)return void(this.scrollIng=!1);this.$el.scrollTop-=this.scrollSpeed}cancelAnimationFrame(this.autoScrollTimer),this.computeLastEndPoint(),this.autoScrollTimer=window.requestAnimationFrame(this.scrollFn)}else this.scrollIng=!1},computeLastEndPoint(){if(!this.mouseDown||!this.startPoint||!this.endPoint)return;const t=this.clientRect;this.lastEndPoint={x:this.endPoint.x-t.left,y:this.endPoint.y-t.top+this.$el.scrollTop};const e=Math.min(this.startPoint.x,this.lastEndPoint.x),i=Math.min(this.startPoint.y,this.lastEndPoint.y),n=Math.abs(this.startPoint.x-this.lastEndPoint.x),s=Math.abs(this.startPoint.y-this.lastEndPoint.y);this.selectionBox={left:e,top:i,width:n,height:s},this.selectionBoxStyling={left:`${e}px`,top:`${i}px`,width:`${n}px`,height:`${s}px`}},onMouseDown(t){if("select-wrapper"!==t.target.className)return;if(2===t.button)return;const e=this.clientRect;this.mouseDown=!0,this.startPoint={x:t.pageX-e.left,y:t.pageY-e.top+this.$el.scrollTop},window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp)},onMouseMove(t){if(!this.mouseDown)return;const e=this.clientRect,i=e.top+e.height,n=this.triggerDistance,s=e.top+n,o=i-n;if(t.pageY>o&&(this.scrollDirection=!0),t.pageY<s&&(this.scrollDirection=!1),t.pageY>s&&t.pageY<o)cancelAnimationFrame(this.autoScrollTimer),this.scrollIng=!1;else{const t=this.scrollDirection&&this.$el.scrollTop+e.height<this.minHeight||!this.scrollDirection&&this.$el.scrollTop>0;!this.scrollIng&&t&&this.boxAutoScroll()}let r=this.scrollSpeed;const l=this.scrollSpeedFast-this.scrollSpeedSlow;if(t.pageY<=s)if(t.pageY>e.top){const i=1-(t.pageY-e.top)/n;r=this.scrollSpeedSlow+i*l}else r=this.scrollSpeedFast;if(t.pageY>=o)if(t.pageY<i){const e=1-(i-t.pageY)/n;r=this.scrollSpeedSlow+e*l}else r=this.scrollSpeedFast;this.scrollSpeed>this.scrollSpeedFast&&(this.scrollSpeed=this.scrollSpeedFast),this.scrollSpeed=r,this.endPoint={x:t.pageX,y:t.pageY},this.scrollIng||this.computeLastEndPoint()},onMouseUp(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),this.mouseDown=!1,this.computeSelectedItems(),this.startPoint=null,this.endPoint=null,this.lastEndPoint=null,this.scrollSpeed=0,this.selectionBoxStyling={left:"0px",top:"0px",width:"0px",height:"0px",borderWidth:"0px"}},computeSelectedItems(){const t=this;this.shiftKeyDown||(this.currentValue=[],this.resetDOM()),this.$nextTick((()=>{this.options.forEach(((e,i)=>{const n=e.getItemStyle(),s=t.selectionBox.left<=n.left+n.width&&t.selectionBox.left+t.selectionBox.width>=n.left&&t.selectionBox.top<=n.top+n.height&&t.selectionBox.top+t.selectionBox.height>=n.top;if(s){const i=t.currentValue.indexOf(e.value);i>-1?(t.currentValue.splice(i,1),this.removeDOM(i)):(t.currentValue.push(e.value),this.addDOM(e))}})),t.selectionBox={left:0,top:0,width:0,height:0}}))},clickSelect(t){const e=this,i=t.value;t.itemIndex;if(e.shiftKeyDown){const n=e.getIndex(e.currentValue,i);e.$nextTick((()=>{n>=0?(e.currentValue.splice(n,1),this.removeDOM(n)):(e.currentValue.push(i),this.addDOM(t))}))}else{const n=e.getIndex(e.currentValue,i);e.currentValue=[],this.resetDOM(),e.$nextTick((()=>{n>=0?(e.currentValue.splice(n,1),this.removeDOM(n)):(e.currentValue.push(i),this.addDOM(t))}))}},detectKey(){navigator.userAgent.indexOf("Window"),navigator.userAgent.indexOf("Mac OS X");const t=this;window.onkeydown=function(e){const i=e||window.event;i&&16===i.keyCode&&(t.shiftKeyDown=!0)},window.onkeyup=function(e){const i=e||window.event;i&&16===i.keyCode&&(t.shiftKeyDown=!1)}},getIndex(t=[],e){const i="[object object]"===Object.prototype.toString.call(e).toLowerCase(),n=this.valueKey;return t.findIndex((t=>i?u(t,n)===u(e,n):t===e))},elementLayout(){const t=this.itemMargin.length;let e,i,n,s,o;1===t?(e=2*this.itemMargin[0],i=2*this.itemMargin[0]):2===t?(e=2*this.itemMargin[1],i=2*this.itemMargin[0]):3===t?(e=2*this.itemMargin[1],i=this.itemMargin[0]+this.itemMargin[2]):4===t&&(e=this.itemMargin[1]+this.itemMargin[3],i=this.itemMargin[0]+this.itemMargin[2]);const r=this.warpperPadding.length;1===r?(n=this.warpperPadding[0],s=this.warpperPadding[0],o=2*this.warpperPadding[0]):2===r?(n=this.warpperPadding[1],s=this.warpperPadding[0],o=2*this.warpperPadding[0]):3===r?(n=this.warpperPadding[1],s=this.warpperPadding[0],o=this.warpperPadding[0]+this.warpperPadding[2]):4===r&&(n=this.warpperPadding[3],s=this.warpperPadding[0],o=this.warpperPadding[0]+this.warpperPadding[2]),e=parseInt(e),i=parseInt(i);const l=this.itemWidth+e,a=this.itemHeight+i,c=(this.$refs.vueDragSelect.offsetWidth,16);let u=0;this.options.forEach(((t,e)=>{!e||e%c||(u+=1),t.$refs.vueDragSelectOption.style.top=`${u*a+s}px`,t.$refs.vueDragSelectOption.style.left=`${e%c*l+n}px`})),this.minHeight=(u+1)*a+o},onOptionDestroy(t){t>-1&&this.options.splice(t,1)},addDOM(t){this.selectedDOMList.push(t.$slots.default[0].elm),this.$emit("update:selectedDOMList",this.selectedDOMList)},removeDOM(t){this.selectedDOMList.splice(t,1),this.$emit("update:selectedDOMList",this.selectedDOMList)},resetDOM(){this.$emit("update:selectedDOMList",[])}},beforeDestroy(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp)},updated(){this.$nextTick((()=>{this.clientRect=this.$el.getBoundingClientRect()})),this.$nextTick((()=>{this.options.sort(((t,e)=>t.itemIndex-e.itemIndex)),this.elementLayout()}))}},m=p,g=i(1001),f=(0,g.Z)(m,a,c,!1,null,"5c0d9b46",null),w=f.exports,v=function(){var t=this,e=t._self._c;return e("div",{ref:"vueDragSelectOption",staticClass:"vue-drag-select-option",class:[t.itemSelected?"selected-item":""],style:t.itemStyle,on:{click:t.clickItem}},[t._t("default")],2)},x=[],S={name:"DragSelectOption",props:{value:{required:!0},itemIndex:{required:!0}},inject:["vueDragSelect"],data(){return{}},mounted(){this.vueDragSelect.options.push(this)},computed:{isObject(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},itemSelected(){return this.contains(this.vueDragSelect.value,this.value)},itemStyle(){const t=this.vueDragSelect.itemMargin.map((t=>t+"px")).join(" ");return{width:`${this.vueDragSelect.itemWidth}px`,height:`${this.vueDragSelect.itemHeight}px`,margin:t}}},methods:{getItemStyle(){const{offsetTop:t,offsetLeft:e,clientWidth:i,clientHeight:n}=this.$refs.vueDragSelectOption;return{top:t,left:e,width:i,height:n}},contains(t=[],e){if(this.isObject){const i=this.vueDragSelect.valueKey;return t&&t.some((t=>u(t,i)===u(e,i)))}return t&&t.indexOf(e)>-1},clickItem(){this.vueDragSelect.clickSelect(this)}},beforeDestroy(){const t=this.vueDragSelect.options.indexOf(this);this.vueDragSelect.onOptionDestroy(t)}},D=S,y=(0,g.Z)(D,v,x,!1,null,null,null),M=y.exports,O={components:{VueDragSelect:w,DragSelectOption:M},data(){return{mood:!0,dataList:[],selectedList:[],selectedDOMList:[],id:300,menuSinglton:null}},created(){this.dataList=[];for(let t=0;t<=255;t++)this.dataList.push({id:t,name:t});document.addEventListener("contextmenu",this.handleContextMenu),document.addEventListener("click",this.handleClick),this.initMenu()},methods:{handleContextMenu(t){t.preventDefault();let e=!1;this.selectedDOMList.forEach((i=>{i.contains(t.target)&&(e=!0)}));const i=this.menuSinglton;if(!e)return this.selectedList=[],this.selectedDOMList=[],void i.classList.add("hidden");i.style.top=t.clientY-15+"px",i.style.left=`${t.clientX}px`,i.classList.remove("hidden")},handleClick(){const t=this.menuSinglton;t.classList.add("hidden")},initMenu(){const t=this,e=h({menus:[{name:"查看选中项",onClick:function(e){alert(`选中了${JSON.stringify(t.selectedList.map((t=>t.name)).join("、"))}`)}}]});this.menuSinglton=e.getInstance()}},beforeDestroy(){document.removeEventListener("contextmenu",this.handleContextMenu),document.removeEventListener("click",this.handleClick)}},L=O,b=(0,g.Z)(L,r,l,!1,null,"b85391a0",null),P=b.exports,$={components:{DragSelect:P}},k=$,C=(0,g.Z)(k,s,o,!1,null,"18bce506",null),E=C.exports;n.ZP.config.productionTip=!1,new n.ZP({render:t=>t(E)}).$mount("#app")}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,i),o.exports}i.m=t,function(){var t=[];i.O=function(e,n,s,o){if(!n){var r=1/0;for(u=0;u<t.length;u++){n=t[u][0],s=t[u][1],o=t[u][2];for(var l=!0,a=0;a<n.length;a++)(!1&o||r>=o)&&Object.keys(i.O).every((function(t){return i.O[t](n[a])}))?n.splice(a--,1):(l=!1,o<r&&(r=o));if(l){t.splice(u--,1);var c=s();void 0!==c&&(e=c)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[n,s,o]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};i.O.j=function(e){return 0===t[e]};var e=function(e,n){var s,o,r=n[0],l=n[1],a=n[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(s in l)i.o(l,s)&&(i.m[s]=l[s]);if(a)var u=a(i)}for(e&&e(n);c<r.length;c++)o=r[c],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(u)},n=self["webpackChunkdrag_demo"]=self["webpackChunkdrag_demo"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=i.O(void 0,[998],(function(){return i(6711)}));n=i.O(n)})();
//# sourceMappingURL=app.c08f7c64.js.map